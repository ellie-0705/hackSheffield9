<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Sound Palette</title>
        <!-- Bootstrap styles -->
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css">
        <!-- Custom styles -->
        <link rel="stylesheet" href="../styles/styles.css">
        <!-- Bootstrap JavaScript -->
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
        <script src="https://kit.fontawesome.com/7118fd66c6.js" crossorigin="anonymous"></script>
        <script>
            async function callPython() {
                const response = await fetch('http://127.0.0.1:5000/run', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },

                    // Pass base64 data here????
                    body: JSON.stringify({image: "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" })
                });
    
                const data = await response.json();
                // Convert image to png and run python script here?
                console.log('Response from Python:', data.result);
                // document.getElementById('output').textContent = data.result;

            }
        </script>
    </head>
    <body onload="initialise();">
        <p id="output"></p>
        <nav class="navbar-brand navbar-light bg-light text-center">
            <div>
                <h1 class="purple">Sound Palette <i class="fa-solid fa-music purple"></i></h1>
            </div>
        </nav>
        <div class="main-container">
            <div id="canvas_div">
                <canvas id="canvas_area" width="1200" height="200"></canvas>
                <p>Draw 4 crotches (quarter notes) per measure</p>
                <audio id="audio" controls>
                    <source id="audio_src" src="">
                    Your browser does not support the audio element.
                  </audio>
            </div>
            
            <div class="container centered">
                <button class="btn btn-outline-danger" id="clearCanvas">Clear All</button>
                <button class="btn btn-outline-primary" id="undoButton">Undo</button>
                <button id="submit" class="btn btn-success" onclick="saveCanvasImage()">Submit</button>
            </div>
        </div>
    </body>
    <script src="../styles/sound-palette-js.js"></script>
    <footer class="mt-auto bg-body-tertiary text-center text-lg-start">
        <div class="text-center p-3 bg-dark">
            <p class="text-white">Sound Palette</p>
            <p class="text-white">Copyright Â© 2024</p>
        </div>
    </footer>
</html>
